# گزارش نهایی دانشگاهی پروژه JobBoard

## اطلاعات گزارش

- نام دانشجو: **سینا رزقیان**
- عنوان پروژه: **طراحی و پیاده‌سازی سامانه کاریابی JobBoard**
- درس: **برنامه‌نویسی وب**
- بستر پیاده‌سازی: **Django 5.x + PostgreSQL + Bootstrap 5**

---

## چکیده

در این پروژه، یک سامانه کاریابی وب‌محور با دو نقش اصلی «کارفرما» و «کارجو» طراحی و پیاده‌سازی کردم. هدف اصلی، پوشش کامل چرخه جذب و استخدام از مرحله ایجاد آگهی تا ارسال درخواست، بررسی رزومه، زمان‌بندی مصاحبه و اعلام نتیجه بوده است. معماری پروژه به‌صورت ماژولار طراحی شده و شامل سه اپلیکیشن اصلی `accounts`، `jobs` و `resumes` است. در کنار قابلیت‌های پایه، امکانات تکمیلی مانند اعلان داخلی، هشدار شغلی، پیشنهاد مهارت، پیشنهاد شغل، فعال‌سازی ایمیلی و فعال‌سازی پیامکی دمو نیز پیاده‌سازی شده‌اند. این گزارش، مستند نهایی فنی و اجرایی پروژه، شامل مدل داده، متدهای کلیدی، قابلیت‌ها، چالش‌های فرایند توسعه، و راهنمای استقرار کامل سامانه است.

**کلیدواژه‌ها:** Django، PostgreSQL، Job Board، Authentication، Recommendation، Notification

---

## 1) مقدمه

موضوع پروژه، پیاده‌سازی یک سامانه کاریابی کامل بوده است که در آن:

- کارفرما بتواند فرصت شغلی ایجاد و مدیریت کند.
- کارجو بتواند فرصت‌ها را جستجو کرده و درخواست ارسال کند.
- وضعیت درخواست‌ها در قالب یک فرآیند قابل پیگیری مدیریت شود.

در مسیر توسعه، تمرکز من روی سه اصل اصلی بوده است:

- انطباق با نیازمندی‌های فازبندی پروژه
- کیفیت تجربه کاربری
- ساختار تمیز و قابل نگهداری در سطح کد

---

## 2) اهداف پروژه

اهداف اجرایی که در پروژه دنبال کردم:

1. پیاده‌سازی کامل سناریوی کاریابی دو نقشی (Employer / JobSeeker)
2. پوشش نیازهای فازهای 1 تا 4
3. ایجاد لایه جستجو و فیلتر دقیق برای آگهی‌ها
4. پیاده‌سازی جریان مدیریت درخواست و تغییر وضعیت
5. افزودن امکانات پیشرفته مانند هشدار شغلی، اعلان داخلی، پیشنهاد مهارت و پیشنهاد شغل
6. آماده‌سازی پروژه برای راه‌اندازی استاندارد روی PostgreSQL

---

## 3) معماری و ساختار سیستم

ساختار نهایی پروژه به شکل زیر است:

- `jobboard/`: تنظیمات هسته، مسیرهای اصلی URL، کانفیگ‌ها
- `accounts/`: احراز هویت، نقش کاربری، فعال‌سازی حساب، اعلان داخلی
- `jobs/`: مدیریت آگهی‌ها، جستجو، اپلای، داشبوردها، هشدارها
- `resumes/`: مدیریت رزومه کارجو
- `templates/` و `static/`: لایه نمایش و منابع رابط کاربری
- `scripts/`: اسکریپت‌های خودکار راه‌اندازی و دیتای تست

این ساختار باعث جداسازی مسئولیت‌ها و ساده‌تر شدن نگهداری پروژه شده است.

---

## 4) مدل داده و روابط

### 4.1 اپلیکیشن `accounts`

- `User` (ارث از `AbstractUser`)
  - فیلدهای افزوده: `email(unique)`, `role`, `is_email_verified`, `sms_activation_code`, `sms_activation_sent_at`
- `EmployerProfile`
  - رابطه `OneToOne` با `User`
- `JobSeekerProfile`
  - رابطه `OneToOne` با `User`
- `Notification`
  - اعلان داخلی کاربر با `ForeignKey` به `User`

### 4.2 اپلیکیشن `jobs`

- `Job`
  - رابطه `ForeignKey` با `EmployerProfile`
  - شامل عنوان، توضیحات، شهر، حقوق، مزایا، مهارت‌ها، نوع همکاری، سطح تجربه
- `JobApplication`
  - اتصال `Job` و `JobSeekerProfile`
  - وضعیت درخواست، رزومه، کاورلتر، یادداشت، تاریخ و ساعت مصاحبه
- `JobApplicationEvent`
  - ثبت تایم‌لاین وضعیت درخواست
- `ApplicationNote`
  - یادداشت داخلی کارفرما روی درخواست
- `SavedJob`
  - ذخیره آگهی توسط کارجو
- `JobAlert`
  - تعریف هشدار جستجو
- `JobAlertMatch`
  - ثبت نتایج تطبیق هشدار با آگهی

### 4.3 اپلیکیشن `resumes`

- `Resume`
  - نگهداری فایل رزومه و اطلاعات تکمیلی (تحصیلات/مهارت)
  - رابطه `ForeignKey` با `JobSeekerProfile`

---

## 5) متدها و پیاده‌سازی فنی (Methods)

## 5.1 متدهای مدیریتی (Manager / QuerySet)

### `JobQuerySet` و `JobManager`

- `recent()`
- `for_employer(employer)`
- `search(q, min_salary, max_salary, skills, company, job_type, experience_level, cover_letter_required)`

**کاربرد:** انتقال منطق جستجو/فیلتر به لایه مدل، یکپارچه‌سازی کوئری‌ها، افزایش خوانایی Viewها

### `JobApplicationQuerySet` و `JobApplicationManager`

- `submitted()`
- `interviews()`
- `rejected()`
- `for_job(job)`
- `for_jobseeker(jobseeker)`

**کاربرد:** ساده‌سازی گزارش‌گیری وضعیت درخواست‌ها در صفحات کارفرما و کارجو

## 5.2 متدهای کلیدی در `jobs.views`

- `_normalize_space()` و `_safe_int()` برای اعتبارسنجی و نرمال‌سازی ورودی فیلترها
- `_popular_skill_suggestions()` و `_skill_suggestions_by_prefix()` برای پیشنهاد مهارت پویا
- `_apply_skill_suggestions()` برای پیشنهاد مهارت در فرم اپلای
- `_last_7_days_application_series()` برای تولید داده نمودار هفتگی داشبورد کارفرما
- `job_list()` برای جستجو، فیلتر و مرتب‌سازی پیشرفته آگهی‌ها
- `apply_job()` برای ثبت درخواست شغلی
- `schedule_interview()` برای ثبت تاریخ/ساعت مصاحبه
- `job_alerts()` و `alert_inbox()` برای هشدارهای شغلی و صندوق اعلان‌های مرتبط
- `dashboard()` برای داشبورد نقش‌محور

## 5.3 متدهای کلیدی در `accounts.views`

- `register_employer()` و `register_jobseeker()`
- `activate_account()` (فعال‌سازی ایمیلی)
- `sms_send_code()` و `sms_activate()` (فعال‌سازی پیامکی)
- `_send_demo_sms_activation()` برای تولید/ذخیره/ارسال کد دمو
- `notifications_list()`، `notification_mark_read()`، `notifications_mark_all_read()`

---

## 6) قابلیت‌های سامانه

## 6.1 قابلیت‌های عمومی

- صفحه اصلی با معرفی سرویس و آگهی‌های جدید
- Featured Companies کلیک‌پذیر و متصل به جستجوی شرکت
- جستجوی سریع بر اساس کلیدواژه و مهارت

## 6.2 قابلیت‌های کارجو

- ثبت‌نام، ورود، فعال‌سازی حساب
- آپلود رزومه
- مشاهده و جستجوی آگهی‌ها
- فیلتر پیشرفته بر اساس:
  - کلیدواژه
  - شرکت
  - شهر
  - حداقل/حداکثر حقوق
  - مهارت‌ها
  - نوع همکاری
  - سطح تجربه
  - نیاز به کاورلتر
  - مرتب‌سازی
- پیشنهاد هوشمند مهارت هنگام جستجو
- ارسال درخواست شغلی
- مشاهده وضعیت درخواست‌ها
- ذخیره و مدیریت آگهی‌های ذخیره‌شده
- تعریف هشدار شغلی و مشاهده نتایج هشدار
- دریافت اعلان داخلی مرتبط با فعالیت‌ها

## 6.3 قابلیت‌های کارفرما

- ثبت‌نام، ورود، فعال‌سازی حساب
- ثبت آگهی جدید و ویرایش آگهی
- پیشنهاد مهارت در فرم ثبت/ویرایش آگهی
- مشاهده آگهی‌های منتشر شده
- مشاهده همه درخواست‌های دریافتی
- مشاهده جزئیات درخواست و ثبت یادداشت داخلی
- زمان‌بندی مصاحبه با تاریخ و ساعت
- رد درخواست
- داشبورد آماری و نمودار درخواست‌های 7 روز اخیر

## 6.4 اعلان‌ها و اطلاع‌رسانی

- اعلان داخلی (In-App Notification)
- ارسال ایمیل دمو برای رویدادهای کلیدی
- ارسال SMS دمو برای فعال‌سازی و رویدادهای مشخص

---

## 7) چالش‌های فرضیِ قابل وقوع در گذشته و نحوه مدیریت

در طول اجرای پروژه، چند چالش فرضی که می‌توانست در مراحل توسعه رخ داده باشد را با رویکرد مهندسی مدیریت کردم:

### چالش فرضی 1: ناسازگاری خروجی جستجو با انتظار کاربر

- شرح: در نسخه‌های اولیه ممکن بود جستجو روی کلیدواژه‌های کوتاه، خروجی‌های بیش از حد کلی تولید کند.
- اقدام اصلاحی: منطق `search()` در سطح مدل به‌گونه‌ای بازتنظیم شد که رفتار کلمات کوتاه کنترل‌شده‌تر باشد.
- نتیجه: نتایج جستجو هدفمندتر و نزدیک‌تر به انتظار کاربر شد.

### چالش فرضی 2: ناهماهنگی تجربه کاربری در بخش مهارت‌ها

- شرح: در مراحل اولیه ممکن بود واردکردن مهارت‌ها برای کاربر زمان‌بر یا غیریکدست باشد.
- اقدام اصلاحی: API پیشنهاد مهارت و autocomplete برای فرم‌های جستجو، اپلای و ثبت آگهی اضافه شد.
- نتیجه: سرعت ورود داده بالا رفت و یکنواختی مهارت‌ها بیشتر شد.

### چالش فرضی 3: عدم مشاهده به‌موقع اعلان‌های هشدار شغلی

- شرح: ممکن بود فقط آگهی‌های جدید تطبیق داده شوند و کاربر از آگهی‌های مرتبط موجود مطلع نشود.
- اقدام اصلاحی: Backfill برای هشدارها در زمان ایجاد Alert پیاده‌سازی شد.
- نتیجه: Alert Inbox از ابتدای ایجاد هشدار، کاربردی و معنادار شد.

### چالش فرضی 4: خالی ماندن نمودار داشبورد کارفرما

- شرح: در برخی سناریوها ممکن بود داده نمودار به‌درستی محاسبه یا نمایش داده نشود.
- اقدام اصلاحی: تولید سری زمانی روزانه برای 7 روز اخیر و ارائه fallback نمایشی انجام شد.
- نتیجه: داشبورد در حالت وجود/عدم وجود داده، خروجی قابل اتکا ارائه می‌دهد.

### چالش فرضی 5: پیچیدگی جریان فعال‌سازی پیامکی

- شرح: ممکن بود کاربر در دریافت کد یا تکمیل فعال‌سازی دچار ابهام شود.
- اقدام اصلاحی: فرآیند ارسال کد با دکمه مستقل `Send code`، وضعیت Pending، TTL و ورود خودکار پس از تایید پیاده‌سازی شد.
- نتیجه: جریان فعال‌سازی شفاف‌تر و موفقیت آن بیشتر شد.

---

## 8) راهنمای راه‌اندازی پروژه

## 8.1 پیش‌نیازها

- Python 3.11+
- PostgreSQL 14+
- pip

## 8.2 نصب اولیه

```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

## 8.3 ایجاد دیتابیس PostgreSQL

در `psql`:

```sql
CREATE DATABASE jobboard_db;
CREATE USER job_user WITH PASSWORD 'YourStrongPassHere';
ALTER ROLE job_user SET client_encoding TO 'utf8';
ALTER ROLE job_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE job_user SET timezone TO 'UTC';
GRANT ALL PRIVILEGES ON DATABASE jobboard_db TO job_user;
ALTER USER job_user CREATEDB;
```

## 8.4 تنظیم `.env`

```env
DB_ENGINE=django.db.backends.postgresql
DB_NAME=jobboard_db
DB_USER=job_user
DB_PASSWORD=YourStrongPassHere
DB_HOST=localhost
DB_PORT=5432
SMS_ACTIVATION_TTL_SECONDS=600
```

## 8.5 اجرای مایگریشن و سرور

```bash
source .venv/bin/activate
set -a; source .env; set +a
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver
```

آدرس اجرا:

- `http://127.0.0.1:8000/`

---

## 9) راهنمای ورود دیتای تست

برای ایجاد داده تست پروژه:

```bash
scripts/insert_test_data.sh
```

نمونه اجرای سفارشی:

```bash
scripts/insert_test_data.sh qa QATest123! 4 8 4 2
```

پارامترها به‌ترتیب:

1. پیشوند نام کاربری
2. رمز عبور
3. تعداد کارفرما
4. تعداد کارجو
5. تعداد آگهی هر کارفرما
6. تعداد درخواست هر کارجو

فایل خروجی اطلاعات کاربران:

- `logs/test_users_<prefix>.txt`

---

## 10) اعتبارسنجی و کنترل سلامت

برای کنترل سلامت فنی پروژه از دستورات زیر استفاده کردم:

```bash
python manage.py check
python manage.py makemigrations --check --dry-run
python -m compileall accounts jobs resumes jobboard
```

در صورت خطای ایجاد دیتابیس تست در `manage.py test`، باید دسترسی `CREATEDB` برای کاربر PostgreSQL فعال باشد.

---

## 11) جمع‌بندی

این پروژه به‌عنوان یک سامانه کاریابی دانشگاهی، تمام چرخه اصلی کسب‌وکار را پوشش می‌دهد و علاوه بر الزامات پایه، امکانات کاربردی تکمیلی نیز دارد. از نظر معماری، مدل داده، لایه متدها، تجربه کاربری، و راه‌اندازی عملیاتی، خروجی نهایی در سطح قابل ارائه دانشگاهی و قابل توسعه برای نسخه‌های بعدی قرار گرفته است.
